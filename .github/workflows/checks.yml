name: Checks

on:
  push:
    branches:
      - main
  pull_request:
  merge_group:

permissions:
  contents: read

jobs:
  template-packages-check:
    runs-on: ubuntu-latest
    steps:
    - name: check out code
      uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
    - name: set up weaver
      uses: open-telemetry/weaver/.github/actions/setup-weaver@6efae3022af925deab04aa70924cd501443fb7f9 # v0.21.2
    - name: verify template packages
      run: ./buildscripts/test_weaver_templates.sh
  policy-packages-check:
    runs-on: ubuntu-latest
    steps:
    - name: check out code
      uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
    - name: set up weaver
      uses: open-telemetry/weaver/.github/actions/setup-weaver@6efae3022af925deab04aa70924cd501443fb7f9 # v0.21.2
    - name: verify policy packages
      run: ./buildscripts/test_weaver_policies.sh
